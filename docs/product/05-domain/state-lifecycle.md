# 状态与数据生命周期

## 1. 数据分类
- 会话敏感数据：钱包实例、私钥衍生信息。
- 可持久化配置：链配置、代币配置、Safe 跟踪列表。
- 运行态数据：余额、交易状态、Safe 详情。
- 禁止持久化数据：私钥明文、助记词明文、用户行为识别数据。

## 1.1 请求边界约束（P0）
- 运行态数据的外部来源仅允许去中心化 RPC。
- 任何中心化后端业务服务不得参与业务状态计算与持久化决策。
- 不允许向分析/追踪平台发送业务行为数据。

## 1.2 密钥生命周期约束
- 私钥仅在浏览器内存中短期驻留。
- 导入成功后应清空输入缓存。
- 不得写入中心化服务、日志系统或第三方分析系统。

## 2. 刷新策略
- 默认采用 Soft Refresh（受节流控制）。
- 仅用户显式点击刷新按钮时触发 Force Refresh。
- 页面切换不应自动触发 Force Refresh。

## 3. 交易轮询策略
- 仅轮询 `submitted` 状态交易。
- 轮询需具备退避机制，避免固定高频请求。
- 达到时长/次数上限后终止轮询并标记超时失败。

## 4. 失效与清理
- 链或账户切换时，清理与当前上下文无关的临时状态。
- Safe nonce 前进时，清理已过期提案（nonce 更小的提案）。
